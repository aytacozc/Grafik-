<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Chart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #f4f5f0;
            color: white;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
        }
        .container {
            width: 80%;
            max-width: 1200px;
            padding: 20px;
        }
        .chart-container {
            width: 100%; 
            height: 300px; 
            margin-bottom: 20px; 
        }
        .table-container {
            width: 52%; 
        }
        .table {
            font-size: 0.8rem; 
            border-collapse: collapse; 
        }
        .table th, .table td {
            vertical-align: middle;
            cursor: pointer;
            padding: 0.5rem; 
        }
        .table th {
            background-color: #e9ecef;
            color: #000;
            font-size: 0.9rem; 
        }
        .change-positive {
            color: green;
        }
        .change-negative {
            color: red;
        }
        .date-buttons {
            margin-bottom: 20px;
            margin-left: 40px;
        }
        .date-buttons button {
            margin: 0 15px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="date-buttons">
        <button class="btn btn-secondary" data-range="1d">1 Gün</button>
        <button class="btn btn-secondary" data-range="1w">1 Hafta</button>
        <button class="btn btn-secondary" data-range="1m">1 Ay</button>
        <button class="btn btn-secondary" data-range="6m">6 Ay</button>
        <button class="btn btn-secondary" data-range="1y">1 Yıl</button>
        <button class="btn btn-secondary" data-range="5y">5 Yıl</button>
    </div>
    <div class="chart-container">
        <canvas id="lineChart"></canvas>
    </div>
    <div class="table-container">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Index</th>
                    <th>Value</th>
                    <th>Change</th>
                    <th>Change %</th>
                </tr>
            </thead>
            <tbody id="indexTable">
                <tr data-index="US 30" data-values="[39450, 39480, 39470, 39490, 39460, 39480, 39450]">
                    <td>US 30</td>
                    <td>39,456.50</td>
                    <td>+10.0</td>
                    <td>+0.03%</td>
                </tr>
                <tr data-index="US 500" data-values="[5330, 5340, 5335, 5345, 5350, 5338, 5336]">
                    <td>US 500</td>
                    <td>5,336.90</td>
                    <td>+17.6</td>
                    <td>+0.33%</td>
                </tr>
                <tr data-index="Dow Jones" data-values="[39480, 39490, 39485, 39500, 39510, 39495, 39497]">
                    <td>Dow Jones</td>
                    <td>39,497.54</td>
                    <td>+51.05</td>
                    <td>+0.13%</td>
                </tr>
                <tr data-index="S&P 500" data-values="[5340, 5345, 5343, 5348, 5352, 5346, 5344]">
                    <td>S&P 500</td>
                    <td>5,344.16</td>
                    <td>+24.85</td>
                    <td>+0.47%</td>
                </tr>
                <tr data-index="Nasdaq" data-values="[16730, 16740, 16735, 16750, 16760, 16745, 16743]">
                    <td>Nasdaq</td>
                    <td>16,745.30</td>
                    <td>+85.28</td>
                    <td>+0.51%</td>
                </tr>
                <tr data-index="S&P 500 VIX" data-values="[20, 21, 19, 22, 20.5, 20.8, 20.4]">
                    <td>S&P 500 VIX</td>
                    <td>20.37</td>
                    <td>-3.42</td>
                    <td>-14.38%</td>
                </tr>
                <tr data-index="Dollar Index" data-values="[102.7, 102.8, 102.6, 102.9, 103.0, 102.95, 102.97]">
                    <td>Dollar Index</td>
                    <td>102.97</td>
                    <td>-0.052</td>
                    <td>-0.05%</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    function updateRowColors() {
        const rows = document.querySelectorAll('#indexTable tr');
        rows.forEach(row => {
            const changeCell = row.cells[2];
            const changePercentCell = row.cells[3];
            
            if (changeCell.textContent.trim().startsWith('+')) {
                changeCell.classList.add('change-positive');
            } else if (changeCell.textContent.trim().startsWith('-')) {
                changeCell.classList.add('change-negative');
            }
            
            if (changePercentCell.textContent.trim().startsWith('+')) {
                changePercentCell.classList.add('change-positive');
            } else if (changePercentCell.textContent.trim().startsWith('-')) {
                changePercentCell.classList.add('change-negative');
            }
        });
    }

    function updateChart(range) {
        const data = {
            '1d': [39450, 39480, 39470, 39490, 39460, 39480, 39450],
            '1w': [39450, 39480, 39470, 39490, 39510, 39490, 39530],
            '1m': [39450, 39500, 39480, 39520, 39510, 39530, 39500, 39480, 39550, 39520],
            '6m': [39450, 39500, 39460, 39550, 39480, 39600, 39500, 39470, 39620, 39510, 39600, 39580, 39610, 39640],
            '1y': [39450, 39500, 39480, 39530, 39520, 39600, 39510, 39470, 39620, 39540, 39600, 39570, 39610, 39650, 39580, 39600],
            '5y': [39450, 39520, 39480, 39600, 39510, 39620, 39550, 39640, 39580, 39600, 39570, 39630, 39590, 39650, 39620, 39600, 39640, 39630, 39600, 39580, 39610, 39590, 39650, 39560, 39630]
        };

        var ctx = document.getElementById('lineChart').getContext('2d');
        var lineChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: Array(data[range].length).fill('').map((_, i) => `T${i+1}`),
                datasets: [{
                    label: 'US 30 Index',
                    data: data[range],
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1, 
                    pointRadius: 1, 
                    fill: true,
                    backgroundColor: 'rgba(54, 162, 235, 0.3)' 
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                return tooltipItems[0].label;
                            },
                            label: function(tooltipItem) {
                                var indexName = lineChart.data.datasets[0].label;
                                var value = tooltipItem.raw;
                                return indexName + ': ' + value;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        suggestedMin: Math.min(...data[range]) - 50,
                        suggestedMax: Math.max(...data[range]) + 50,
                        ticks: {
                            stepSize: 50
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        document.getElementById('indexTable').addEventListener('click', function(event) {
            var target = event.target.closest('tr');
            if (target) {
                var indexName = target.getAttribute('data-index');
                var dataValues = JSON.parse(target.getAttribute('data-values'));

                lineChart.data.datasets[0].label = indexName + ' Index';
                lineChart.data.datasets[0].data = dataValues;
                lineChart.update();
            }
        });
    }

    updateChart('1d');

   
    document.querySelectorAll('.date-buttons button').forEach(button => {
        button.addEventListener('click', function() {
            const range = this.getAttribute('data-range');
            updateChart(range);
        });
    });

    updateRowColors();
});
</script>

</body>
</html>
